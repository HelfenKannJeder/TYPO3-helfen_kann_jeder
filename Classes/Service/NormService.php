<?php
class Tx_HelfenKannJeder_Service_NormService implements t3lib_Singleton {
	protected $phoneNumberPrefixes = array('0115','0155','0156','0159','0160','0162','0163','0164','0168','0169','0170','0171','0172','0173','0174','0175','0176','0177','0178','0179','0180','0181','0182','0183','0184','0185','0186','0187','0188','0189','0191','0192','0193','0194','0199','0201','0202','0203','0208','0209','0211','0212','0214','0221','0228','0231','0234','0241','0251','0261','0271','0281','0291','030','033051','033053','033054','033055','033056','033080','033082','033083','033084','033085','033086','033087','033088','033089','033093','033094','0331','033200','033201','033202','033203','033204','033205','033206','033207','033208','033209','033230','033231','033232','033233','033234','033235','033237','033238','033239','033331','033332','033333','033334','033335','033336','033337','033338','033361','033362','033363','033364','033365','033366','033367','033368','033369','033393','033394','033395','033396','033397','033398','033432','033433','033434','033435','033436','033437','033438','033439','033451','033452','033454','033456','033457','033458','033470','033472','033473','033474','033475','033476','033477','033478','033479','0335','033601','033602','033603','033604','033605','033606','033607','033608','033609','033631','033632','033633','033634','033635','033636','033637','033638','033652','033653','033654','033655','033656','033657','033671','033672','033673','033674','033675','033676','033677','033678','033679','033701','033702','033703','033704','033708','033731','033732','033733','033734','033741','033742','033743','033744','033745','033746','033747','033748','033760','033762','033763','033764','033765','033766','033767','033768','033769','033830','033831','033832','033833','033834','033835','033836','033837','033838','033839','033841','033843','033844','033845','033846','033847','033848','033849','033870','033872','033873','033874','033875','033876','033877','033878','033920','033921','033922','033923','033924','033925','033926','033928','033929','033931','033932','033933','033962','033963','033964','033965','033966','033967','033968','033969','033970','033971','033972','033973','033974','033975','033976','033977','033978','033979','033981','033982','033983','033984','033986','033989','0340','0341','034202','034203','034204','034205','034206','034207','034208','034221','034222','034223','034224','034241','034242','034243','034244','034261','034262','034263','034291','034292','034293','034294','034295','034296','034297','034298','034299','034321','034322','034324','034325','034327','034328','034341','034342','034343','034344','034345','034346','034347','034348','034361','034362','034363','034364','034381','034382','034383','034384','034385','034386','034422','034423','034424','034425','034426','034441','034443','034444','034445','034446','034461','034462','034463','034464','034465','034466','034467','034491','034492','034493','034494','034495','034496','034497','034498','0345','034600','034601','034602','034603','034604','034605','034606','034607','034609','034632','034633','034635','034636','034637','034638','034639','034651','034652','034653','034654','034656','034658','034659','034671','034672','034673','034691','034692','034721','034722','034741','034742','034743','034745','034746','034771','034772','034773','034774','034775','034776','034779','034781','034782','034783','034785','034901','034903','034904','034905','034906','034907','034909','034920','034921','034922','034923','034924','034925','034926','034927','034928','034929','034953','034954','034955','034956','034973','034975','034976','034977','034978','034979','035020','035021','035022','035023','035024','035025','035026','035027','035028','035032','035033','035052','035053','035054','035055','035056','035057','035058','0351','035200','035201','035202','035203','035204','035205','035206','035207','035208','035209','035240','035241','035242','035243','035244','035245','035246','035247','035248','035249','035263','035264','035265','035266','035267','035268','035322','035323','035324','035325','035326','035327','035329','035341','035342','035343','035361','035362','035363','035364','035365','035383','035384','035385','035386','035387','035388','035389','035433','035434','035435','035436','035439','035451','035452','035453','035454','035455','035456','035471','035472','035473','035474','035475','035476','035477','035478','0355','035600','035601','035602','035603','035604','035605','035606','035607','035608','035609','035691','035692','035693','035694','035695','035696','035697','035698','035722','035723','035724','035725','035726','035727','035728','035751','035752','035753','035754','035755','035756','035771','035772','035773','035774','035775','035792','035793','035795','035796','035797','035820','035822','035823','035825','035826','035827','035828','035829','035841','035842','035843','035844','035872','035873','035874','035875','035876','035877','035891','035892','035893','035894','035895','035930','035931','035932','035933','035934','035935','035936','035937','035938','035939','035951','035952','035953','035954','035955','035971','035973','035974','035975','036020','036021','036022','036023','036024','036025','036026','036027','036028','036029','036041','036042','036043','036071','036072','036074','036075','036076','036077','036081','036082','036083','036084','036085','036087','0361','036200','036201','036202','036203','036204','036205','036206','036207','036208','036209','036252','036253','036254','036255','036256','036257','036258','036259','036330','036331','036332','036333','036334','036335','036336','036337','036338','036370','036371','036372','036373','036374','036375','036376','036377','036378','036379','036421','036422','036423','036424','036425','036426','036427','036428','036450','036451','036452','036453','036454','036458','036459','036461','036462','036463','036464','036465','036481','036482','036483','036484','0365','036601','036602','036603','036604','036605','036606','036607','036608','036621','036622','036623','036624','036625','036626','036628','036640','036642','036643','036644','036645','036646','036647','036648','036649','036651','036652','036653','036691','036692','036693','036694','036695','036701','036702','036703','036704','036705','036730','036731','036732','036733','036734','036735','036736','036737','036738','036739','036741','036742','036743','036744','036761','036762','036764','036766','036781','036782','036783','036784','036785','036840','036841','036842','036843','036844','036845','036846','036847','036848','036849','036870','036871','036873','036874','036875','036878','036920','036921','036922','036923','036924','036925','036926','036927','036928','036929','036940','036941','036943','036944','036945','036946','036947','036948','036949','036961','036962','036963','036964','036965','036966','036967','036968','036969','0371','037200','037202','037203','037204','037206','037207','037208','037209','037291','037292','037293','037294','037295','037296','037297','037298','037320','037321','037322','037323','037324','037325','037326','037327','037328','037329','037341','037342','037343','037344','037346','037347','037348','037349','037360','037361','037362','037363','037364','037365','037366','037367','037368','037369','037381','037382','037383','037384','037421','037422','037423','037430','037431','037432','037433','037434','037435','037436','037437','037438','037439','037462','037463','037464','037465','037467','037468','0375','037600','037601','037602','037603','037604','037605','037606','037607','037608','037609','037752','037754','037755','037756','037757','0381','038201','038202','038203','038204','038205','038206','038207','038208','038209','038220','038221','038222','038223','038224','038225','038226','038227','038228','038229','038231','038232','038233','038234','038292','038293','038294','038295','038296','038297','038300','038301','038302','038303','038304','038305','038306','038307','038308','038309','038320','038321','038322','038323','038324','038325','038326','038327','038328','038331','038332','038333','038334','038351','038352','038353','038354','038355','038356','038370','038371','038372','038373','038374','038375','038376','038377','038378','038379','038391','038392','038393','038422','038423','038424','038425','038426','038427','038428','038429','038450','038451','038452','038453','038454','038455','038456','038457','038458','038459','038461','038462','038464','038466','038481','038482','038483','038484','038485','038486','038488','0385','038720','038721','038722','038723','038724','038725','038726','038727','038728','038729','038731','038732','038733','038735','038736','038737','038738','038750','038751','038752','038753','038754','038755','038756','038757','038758','038759','038780','038781','038782','038783','038784','038785','038787','038788','038789','038791','038792','038793','038794','038796','038797','038821','038822','038823','038824','038825','038826','038827','038828','038841','038842','038843','038844','038845','038847','038848','038850','038851','038852','038853','038854','038855','038856','038858','038859','038871','038872','038873','038874','038875','038876','039000','039001','039002','039003','039004','039005','039006','039007','039008','039009','039030','039031','039032','039033','039034','039035','039036','039037','039038','039039','039050','039051','039052','039053','039054','039055','039056','039057','039058','039059','039061','039062','039080','039081','039082','039083','039084','039085','039086','039087','039088','039089','0391','039200','039201','039202','039203','039204','039205','039206','039207','039208','039209','039221','039222','039223','039224','039225','039226','039241','039242','039243','039244','039245','039246','039247','039248','039262','039263','039264','039265','039266','039267','039268','039291','039292','039293','039294','039295','039296','039297','039298','039320','039321','039322','039323','039324','039325','039327','039328','039329','039341','039342','039343','039344','039345','039346','039347','039348','039349','039361','039362','039363','039364','039365','039366','039382','039383','039384','039386','039387','039388','039389','039390','039391','039392','039393','039394','039395','039396','039397','039398','039399','039400','039401','039402','039403','039404','039405','039406','039407','039408','039409','039421','039422','039423','039424','039425','039426','039427','039428','039451','039452','039453','039454','039455','039456','039457','039458','039459','039481','039482','039483','039484','039485','039487','039488','039489','0395','039600','039601','039602','039603','039604','039605','039606','039607','039608','039721','039722','039723','039724','039726','039727','039728','039740','039741','039742','039743','039744','039745','039746','039747','039748','039749','039751','039752','039753','039754','039771','039772','039773','039774','039775','039776','039777','039778','039779','039820','039821','039822','039823','039824','039825','039826','039827','039828','039829','039831','039832','039833','039851','039852','039853','039854','039855','039856','039857','039858','039859','039861','039862','039863','039881','039882','039883','039884','039885','039886','039887','039888','039889','039921','039922','039923','039924','039925','039926','039927','039928','039929','039931','039932','039933','039934','039951','039952','039953','039954','039955','039956','039957','039959','039971','039972','039973','039975','039976','039977','039978','039991','039992','039993','039994','039995','039996','039997','039998','039999','040','0421','0431','0441','0451','0461','0471','0481','0491','0511','0521','0531','0541','0551','0561','0571','0581','0591','0611','0621','0631','0641','0651','0661','0671','0681','069','0711','0721','0731','0741','0751','0761','0771','0781','0791','0811','0821','0831','0841','0851','0861','0871','0881','089','0906','0911','0921','0931','0941','0951','0961','0971','0981','0991');

	public function phoneNumber($telephone) {
		$telephone = preg_replace("/^0049/i", "0", $telephone);
		$telephone = preg_replace("/^\+49/i", "0", $telephone);
		$telephone = preg_replace("/^0\ /i", "0", $telephone);
		$telephone = preg_replace("/[^0-9\ ]/i", " ", $telephone);
		$telephone = preg_replace("/[\ ]+/i", " ", $telephone);

		if (strpos($telephone, " ") != strrpos($telephone, " ") || strpos($telephone, " ") === false) {
			$telephone = preg_replace("/[^0-9]/i", "", $telephone);
			$numberFound = false;
			for ($i = 3; $i < 8 && !$numberFound; $i++) {
				if (in_array(substr($telephone,0,$i), $this->phoneNumberPrefixes)) {
					$telephone = substr($telephone,0,$i)." ".substr($telephone,$i);
					$numberFound = true;
				}
			}
			if (!$numberFound) {
				$telephone = substr($telephone,0,5)." ".substr($telephone,5);
			}
		}
		$telephone = trim($telephone);
		return $telephone;
	}

}
?>
